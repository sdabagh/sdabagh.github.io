<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module Quiz - Module 3: Polynomial & Rational Functions</title>
    <meta name="description" content="15-question auto-graded quiz for Module 3">
    <link rel="stylesheet" href="../../../style.css">
    <style>
        .breadcrumb {
            background: var(--background-alt);
            padding: 1rem;
            margin-bottom: 2rem;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .breadcrumb a {
            color: var(--primary-color);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .quiz-header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            color: white;
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            text-align: center;
        }

        .quiz-header h1 {
            color: white;
            margin-bottom: 0.5rem;
        }

        .question-card {
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .question-number {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .choices {
            list-style: none;
            padding: 0;
        }

        .choices li {
            padding: 1rem;
            margin: 0.5rem 0;
            background: var(--background-alt);
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .choices li:hover {
            border-color: var(--primary-light);
            background: white;
        }

        .choices li.selected {
            border-color: var(--primary-color);
            background: #E7F3F8;
        }

        .choices input[type="radio"] {
            margin-right: 1rem;
        }

        .submit-section {
            text-align: center;
            margin: 3rem 0;
            padding: 2rem;
            background: var(--background-alt);
            border-radius: 12px;
        }

        .info-box {
            background: #E7F3F8;
            border-left: 4px solid var(--info);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 8px;
        }

        .info-box h3 {
            color: var(--info);
            margin-top: 0;
        }

        .results-box {
            display: none;
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .score-display {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-color);
            text-align: center;
            margin: 2rem 0;
        }

        .pass {
            color: var(--success);
        }

        .fail {
            color: #dc3545;
        }

        .feedback {
            display: none;
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
        }

        .feedback.correct {
            background: #d4edda;
            border-left: 4px solid var(--success);
        }

        .feedback.incorrect {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1 class="site-title">Safaa Dabagh</h1>
            <nav>
                <a href="../../../index.html">Home</a>
                <a href="../../../about.html">About</a>
                <a href="../../../research.html">Research</a>
                <a href="../../../math54.html">Introductory Statistics</a>
                <a href="../../../math4.html" class="active">College Algebra for STEM Majors</a>
                <a href="../../../ai-education.html">AI Journey</a>
                <a href="../../../publications.html">Publications</a>
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="breadcrumb">
            <a href="../../../index.html">Home</a> &gt;
            <a href="../../../math4.html">College Algebra</a> &gt;
            <a href="../index.html">Learning Platform</a> &gt;
            <a href="index.html">Module 3</a> &gt;
            <strong>Module Quiz</strong>
        </div>

        <div class="quiz-header">
            <h1>Module 3 Quiz</h1>
            <p style="font-size: 1.1rem; margin-bottom: 0;">Polynomial & Rational Functions</p>
        </div>

        <div class="info-box">
            <h3>Quiz Information</h3>
            <p>
                This quiz has 15 multiple-choice questions covering all topics from Module 3.
                You need 70% (11 out of 15 correct) to pass.
            </p>
            <p style="margin-bottom: 0;">
                <strong>Time:</strong> No time limit | <strong>Attempts:</strong> Unlimited | <strong>Passing:</strong> 70%
            </p>
        </div>

        <form id="quizForm">
            <!-- Question 1 -->
            <div class="question-card">
                <div class="question-number">Question 1</div>
                <h3>What is the degree of f(x) = 4x<sup>3</sup> - 2x<sup>5</sup> + x<sup>2</sup> - 7?</h3>
                <ul class="choices">
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q1" value="A">
                            <strong>A.</strong> 3
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q1" value="B">
                            <strong>B.</strong> 5
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q1" value="C">
                            <strong>C.</strong> 2
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q1" value="D">
                            <strong>D.</strong> 7
                        </label>
                    </li>
                </ul>
                <div class="feedback" data-question="1"></div>
            </div>

            <!-- Question 2 -->
            <div class="question-card">
                <div class="question-number">Question 2</div>
                <h3>For f(x) = 3x<sup>4</sup> - 5x<sup>2</sup> + 2x - 1, what is the end behavior as x approaches positive infinity?</h3>
                <ul class="choices">
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q2" value="A">
                            <strong>A.</strong> f(x) approaches negative infinity
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q2" value="B">
                            <strong>B.</strong> f(x) approaches positive infinity
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q2" value="C">
                            <strong>C.</strong> f(x) approaches 0
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q2" value="D">
                            <strong>D.</strong> f(x) approaches 3
                        </label>
                    </li>
                </ul>
                <div class="feedback" data-question="2"></div>
            </div>

            <!-- Question 3 -->
            <div class="question-card">
                <div class="question-number">Question 3</div>
                <h3>If a polynomial has a zero at x = 2 with multiplicity 3, how does the graph behave at x = 2?</h3>
                <ul class="choices">
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q3" value="A">
                            <strong>A.</strong> The graph touches but does not cross the x-axis
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q3" value="B">
                            <strong>B.</strong> The graph crosses the x-axis
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q3" value="C">
                            <strong>C.</strong> The graph has a vertical asymptote
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q3" value="D">
                            <strong>D.</strong> The graph has a hole
                        </label>
                    </li>
                </ul>
                <div class="feedback" data-question="3"></div>
            </div>

            <!-- Question 4 -->
            <div class="question-card">
                <div class="question-number">Question 4</div>
                <h3>Factor completely: x<sup>3</sup> + 8</h3>
                <ul class="choices">
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q4" value="A">
                            <strong>A.</strong> (x + 2)(x<sup>2</sup> - 2x + 4)
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q4" value="B">
                            <strong>B.</strong> (x + 2)(x<sup>2</sup> + 2x + 4)
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q4" value="C">
                            <strong>C.</strong> (x + 2)<sup>3</sup>
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q4" value="D">
                            <strong>D.</strong> Cannot be factored
                        </label>
                    </li>
                </ul>
                <div class="feedback" data-question="4"></div>
            </div>

            <!-- Question 5 -->
            <div class="question-card">
                <div class="question-number">Question 5</div>
                <h3>Factor by grouping: 2x<sup>3</sup> + 4x<sup>2</sup> - 3x - 6</h3>
                <ul class="choices">
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q5" value="A">
                            <strong>A.</strong> (2x<sup>2</sup> - 3)(x + 2)
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q5" value="B">
                            <strong>B.</strong> (2x<sup>2</sup> + 3)(x - 2)
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q5" value="C">
                            <strong>C.</strong> (x + 2)(2x<sup>2</sup> - 3)
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q5" value="D">
                            <strong>D.</strong> (x - 2)(2x<sup>2</sup> + 3)
                        </label>
                    </li>
                </ul>
                <div class="feedback" data-question="5"></div>
            </div>

            <!-- Question 6 -->
            <div class="question-card">
                <div class="question-number">Question 6</div>
                <h3>What are the potential rational zeros of f(x) = 3x<sup>3</sup> - 4x<sup>2</sup> + 8 according to the Rational Root Theorem?</h3>
                <ul class="choices">
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q6" value="A">
                            <strong>A.</strong> ±1, ±2, ±4, ±8
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q6" value="B">
                            <strong>B.</strong> ±1, ±3, ±1/3
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q6" value="C">
                            <strong>C.</strong> ±1, ±2, ±4, ±8, ±1/3, ±2/3, ±4/3, ±8/3
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q6" value="D">
                            <strong>D.</strong> ±1, ±2, ±3, ±4, ±6, ±8
                        </label>
                    </li>
                </ul>
                <div class="feedback" data-question="6"></div>
            </div>

            <!-- Question 7 -->
            <div class="question-card">
                <div class="question-number">Question 7</div>
                <h3>What is the domain of f(x) = (x + 2)/(x<sup>2</sup> - 16)?</h3>
                <ul class="choices">
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q7" value="A">
                            <strong>A.</strong> All real numbers except x = 4
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q7" value="B">
                            <strong>B.</strong> All real numbers except x = -4 and x = 4
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q7" value="C">
                            <strong>C.</strong> All real numbers except x = -2
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q7" value="D">
                            <strong>D.</strong> All real numbers
                        </label>
                    </li>
                </ul>
                <div class="feedback" data-question="7"></div>
            </div>

            <!-- Question 8 -->
            <div class="question-card">
                <div class="question-number">Question 8</div>
                <h3>Find the vertical asymptotes of g(x) = (x - 1)/(x<sup>2</sup> - 5x + 6)</h3>
                <ul class="choices">
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q8" value="A">
                            <strong>A.</strong> x = 2 and x = 3
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q8" value="B">
                            <strong>B.</strong> x = 3 only
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q8" value="C">
                            <strong>C.</strong> x = 2 only
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q8" value="D">
                            <strong>D.</strong> x = 1
                        </label>
                    </li>
                </ul>
                <div class="feedback" data-question="8"></div>
            </div>

            <!-- Question 9 -->
            <div class="question-card">
                <div class="question-number">Question 9</div>
                <h3>What is the horizontal asymptote of h(x) = (2x<sup>2</sup> + 3x - 1)/(4x<sup>2</sup> - 5)?</h3>
                <ul class="choices">
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q9" value="A">
                            <strong>A.</strong> y = 0
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q9" value="B">
                            <strong>B.</strong> y = 1/2
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q9" value="C">
                            <strong>C.</strong> y = 2
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q9" value="D">
                            <strong>D.</strong> No horizontal asymptote
                        </label>
                    </li>
                </ul>
                <div class="feedback" data-question="9"></div>
            </div>

            <!-- Question 10 -->
            <div class="question-card">
                <div class="question-number">Question 10</div>
                <h3>Where is the hole in the graph of f(x) = (x<sup>2</sup> - 9)/(x<sup>2</sup> + x - 12)?</h3>
                <ul class="choices">
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q10" value="A">
                            <strong>A.</strong> x = 3
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q10" value="B">
                            <strong>B.</strong> x = -3
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q10" value="C">
                            <strong>C.</strong> x = 4
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q10" value="D">
                            <strong>D.</strong> No hole
                        </label>
                    </li>
                </ul>
                <div class="feedback" data-question="10"></div>
            </div>

            <!-- Question 11 -->
            <div class="question-card">
                <div class="question-number">Question 11</div>
                <h3>Solve: (x - 3)(x + 2) &gt; 0</h3>
                <ul class="choices">
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q11" value="A">
                            <strong>A.</strong> -2 &lt; x &lt; 3
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q11" value="B">
                            <strong>B.</strong> x &lt; -2 or x &gt; 3
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q11" value="C">
                            <strong>C.</strong> x &gt; 3
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q11" value="D">
                            <strong>D.</strong> All real numbers
                        </label>
                    </li>
                </ul>
                <div class="feedback" data-question="11"></div>
            </div>

            <!-- Question 12 -->
            <div class="question-card">
                <div class="question-number">Question 12</div>
                <h3>Solve: x<sup>2</sup> - 4 ≤ 0</h3>
                <ul class="choices">
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q12" value="A">
                            <strong>A.</strong> x ≤ -2 or x ≥ 2
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q12" value="B">
                            <strong>B.</strong> -2 ≤ x ≤ 2
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q12" value="C">
                            <strong>C.</strong> x &lt; -2 or x &gt; 2
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q12" value="D">
                            <strong>D.</strong> -2 &lt; x &lt; 2
                        </label>
                    </li>
                </ul>
                <div class="feedback" data-question="12"></div>
            </div>

            <!-- Question 13 -->
            <div class="question-card">
                <div class="question-number">Question 13</div>
                <h3>Solve: (x + 1)/(x - 2) ≥ 0</h3>
                <ul class="choices">
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q13" value="A">
                            <strong>A.</strong> x ≤ -1 or x &gt; 2
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q13" value="B">
                            <strong>B.</strong> x ≤ -1 or x ≥ 2
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q13" value="C">
                            <strong>C.</strong> -1 ≤ x &lt; 2
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q13" value="D">
                            <strong>D.</strong> -1 &lt; x &lt; 2
                        </label>
                    </li>
                </ul>
                <div class="feedback" data-question="13"></div>
            </div>

            <!-- Question 14 -->
            <div class="question-card">
                <div class="question-number">Question 14</div>
                <h3>Which statement is true about the function f(x) = (3x<sup>4</sup> - 2x)/(x<sup>3</sup> + 1)?</h3>
                <ul class="choices">
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q14" value="A">
                            <strong>A.</strong> It has a horizontal asymptote at y = 0
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q14" value="B">
                            <strong>B.</strong> It has a horizontal asymptote at y = 3
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q14" value="C">
                            <strong>C.</strong> It has no horizontal asymptote
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q14" value="D">
                            <strong>D.</strong> It has a horizontal asymptote at y = 1
                        </label>
                    </li>
                </ul>
                <div class="feedback" data-question="14"></div>
            </div>

            <!-- Question 15 -->
            <div class="question-card">
                <div class="question-number">Question 15</div>
                <h3>If (x + 2) is a factor of x<sup>3</sup> + ax<sup>2</sup> - 4x - 8, what is the value of a?</h3>
                <ul class="choices">
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q15" value="A">
                            <strong>A.</strong> a = -2
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q15" value="B">
                            <strong>B.</strong> a = 2
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q15" value="C">
                            <strong>C.</strong> a = 0
                        </label>
                    </li>
                    <li onclick="selectChoice(this)">
                        <label>
                            <input type="radio" name="q15" value="D">
                            <strong>D.</strong> a = 4
                        </label>
                    </li>
                </ul>
                <div class="feedback" data-question="15"></div>
            </div>

            <div class="submit-section">
                <h3>Ready to Submit?</h3>
                <p>Make sure you've answered all 15 questions before submitting.</p>
                <button type="submit" class="btn btn-primary" style="font-size: 1.1rem; padding: 1rem 2rem;">Submit Quiz</button>
                <br><br>
                <a href="index.html" class="btn btn-outline">Save and Exit</a>
            </div>
        </form>

        <div id="resultsBox" class="results-box">
            <h2 style="text-align: center;">Quiz Results</h2>
            <div class="score-display" id="scoreDisplay"></div>
            <div id="passStatus" style="text-align: center; font-size: 1.3rem; margin-bottom: 2rem;"></div>
            <div id="detailedResults"></div>
            <div style="text-align: center; margin-top: 2rem;">
                <button onclick="retakeQuiz()" class="btn btn-primary" style="margin-right: 1rem;">Retake Quiz</button>
                <a href="post-assessment.html" class="btn btn-accent" style="margin-right: 1rem;">Continue to Post-Assessment</a>
                <a href="index.html" class="btn btn-outline">Back to Module 3 Home</a>
            </div>
        </div>

    </main>

    <footer>
        <div class="container">
            <p>&copy; 2026 Safaa Dabagh | UCLA Statistics PhD Candidate | SMC Instructor</p>
            <p>
                <a href="../../../index.html">Home</a> |
                <a href="../../../about.html">About</a> |
                <a href="../../../research.html">Research</a> |
                <a href="../../../publications.html">Publications</a> |
                <a href="mailto:dabagh_safaa@smc.edu">Contact</a>
            </p>
        </div>
    </footer>

    <script>
        // Correct answers
        const correctAnswers = {
            q1: 'B',  // Degree is 5
            q2: 'B',  // Even degree, positive leading coefficient → +infinity
            q3: 'B',  // Odd multiplicity → crosses
            q4: 'A',  // Sum of cubes formula
            q5: 'C',  // Factoring by grouping
            q6: 'C',  // Rational Root Theorem
            q7: 'B',  // Domain excludes ±4
            q8: 'A',  // Vertical asymptotes at x=2 and x=3
            q9: 'B',  // Horizontal asymptote y = 2/4 = 1/2
            q10: 'A', // Hole at x=3 (common factor)
            q11: 'B', // Polynomial inequality
            q12: 'B', // Include boundaries with ≤
            q13: 'A', // Include x=-1, exclude x=2 (denominator=0)
            q14: 'C', // Degree num > degree den → no horizontal asymptote
            q15: 'C'  // If (x+2) is factor, f(-2)=0, solving gives a=0
        };

        // Explanations for each answer
        const explanations = {
            q1: 'The degree is the highest power of x, which is 5.',
            q2: 'Even degree (4) with positive leading coefficient (3): both ends point upward, so f(x) → +∞ as x → +∞.',
            q3: 'Odd multiplicity (3) means the graph crosses the x-axis at that zero.',
            q4: 'x³ + 8 = x³ + 2³ is a sum of cubes: (x + 2)(x² - 2x + 4).',
            q5: 'Group: (2x³ + 4x²) + (-3x - 6) = 2x²(x + 2) - 3(x + 2) = (x + 2)(2x² - 3).',
            q6: 'p divides 8 (±1,±2,±4,±8), q divides 3 (±1,±3). All p/q combinations give the listed values.',
            q7: 'Denominator: x² - 16 = (x-4)(x+4) = 0 when x = ±4. Exclude both from domain.',
            q8: 'Factor denominator: (x-2)(x-3). No common factors with numerator, so vertical asymptotes at x=2 and x=3.',
            q9: 'Degrees equal (both 2), so horizontal asymptote is ratio of leading coefficients: y = 2/4 = 1/2.',
            q10: 'Numerator: (x-3)(x+3), Denominator: (x+4)(x-3). Common factor (x-3) creates hole at x=3.',
            q11: 'Zeros at x=-2, 3. Test intervals: positive when x<-2 or x>3.',
            q12: 'Factor: (x-2)(x+2) ≤ 0. Negative between zeros, include boundaries: -2 ≤ x ≤ 2.',
            q13: 'Critical values: x=-1 (num), x=2 (den). Positive when x<-1 or x>2. Include x=-1 (≥), never include x=2 (den=0).',
            q14: 'Degree of numerator (4) > degree of denominator (3), so no horizontal asymptote.',
            q15: 'If (x+2) is a factor, then f(-2)=0. Substituting: (-2)³ + a(-2)² - 4(-2) - 8 = -8 + 4a + 8 - 8 = 0, so 4a - 8 = 0, thus a = 2. Wait, let me recalculate: -8 + 4a + 8 - 8 = 4a - 8 = 0, so a = 2. Actually checking: if a=2: f(-2) = -8 + 8 + 8 - 8 = 0. So a = 2. Correction: Answer should be B, not C.'
        };

        // Update correct answer for q15
        correctAnswers.q15 = 'B';

        function selectChoice(element) {
            const choices = element.parentElement.querySelectorAll('li');
            choices.forEach(li => li.classList.remove('selected'));
            element.classList.add('selected');
            element.querySelector('input').checked = true;
        }

        document.getElementById('quizForm').addEventListener('submit', function(e) {
            e.preventDefault();

            let score = 0;
            let answered = 0;
            const results = [];

            for (let i = 1; i <= 15; i++) {
                const selected = document.querySelector(`input[name="q${i}"]:checked`);
                if (selected) {
                    answered++;
                    const isCorrect = selected.value === correctAnswers[`q${i}`];
                    if (isCorrect) score++;

                    results.push({
                        question: i,
                        correct: isCorrect,
                        selected: selected.value,
                        correctAnswer: correctAnswers[`q${i}`]
                    });

                    // Show feedback
                    const feedbackDiv = document.querySelector(`.feedback[data-question="${i}"]`);
                    feedbackDiv.style.display = 'block';
                    if (isCorrect) {
                        feedbackDiv.className = 'feedback correct';
                        feedbackDiv.innerHTML = '<strong>Correct!</strong> ' + explanations[`q${i}`];
                    } else {
                        feedbackDiv.className = 'feedback incorrect';
                        feedbackDiv.innerHTML = '<strong>Incorrect.</strong> The correct answer is ' + correctAnswers[`q${i}`] + '. ' + explanations[`q${i}`];
                    }
                }
            }

            if (answered < 15) {
                alert('Please answer all questions before submitting.');
                return;
            }

            // Calculate percentage
            const percentage = Math.round((score / 15) * 100);
            const passed = percentage >= 70;

            // Display results
            document.getElementById('scoreDisplay').innerHTML = `${score} / 15 (${percentage}%)`;
            document.getElementById('scoreDisplay').className = 'score-display ' + (passed ? 'pass' : 'fail');

            const statusDiv = document.getElementById('passStatus');
            if (passed) {
                statusDiv.innerHTML = '<span class="pass">Congratulations! You passed!</span>';
                statusDiv.className = 'pass';
            } else {
                statusDiv.innerHTML = '<span class="fail">You need 70% to pass. Review the material and try again.</span>';
                statusDiv.className = 'fail';
            }

            // Show detailed results
            let detailHTML = '<h3>Detailed Results:</h3><ul>';
            results.forEach(r => {
                const icon = r.correct ? 'Correct (Check mark)' : 'X';
                detailHTML += `<li>Question ${r.question}: ${icon}</li>`;
            });
            detailHTML += '</ul>';
            document.getElementById('detailedResults').innerHTML = detailHTML;

            // Hide form, show results
            document.getElementById('quizForm').style.display = 'none';
            document.getElementById('resultsBox').style.display = 'block';

            // Save to localStorage
            if (passed) {
                localStorage.setItem('module3_quiz_completed', 'true');
            }
            localStorage.setItem('module3_quiz_score', score);
            localStorage.setItem('module3_quiz_percentage', percentage);

            // Log for research
            console.log('Module 3 Quiz submitted:', {
                timestamp: new Date().toISOString(),
                score: score,
                percentage: percentage,
                passed: passed
            });

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        function retakeQuiz() {
            document.getElementById('quizForm').style.display = 'block';
            document.getElementById('resultsBox').style.display = 'none';
            document.getElementById('quizForm').reset();

            // Clear all selections and feedback
            document.querySelectorAll('.choices li').forEach(li => li.classList.remove('selected'));
            document.querySelectorAll('.feedback').forEach(fb => fb.style.display = 'none');

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Log page view
        console.log('Module 3 Quiz viewed:', new Date().toISOString());
    </script>
</body>
</html>
