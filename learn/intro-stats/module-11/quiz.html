<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 11 Quiz - Simple Linear Regression</title>
    <meta name="description" content="15-question auto-graded quiz on simple linear regression">
    <link rel="stylesheet" href="../../../style.css">
    <style>
        .quiz-header {
            background: linear-gradient(135deg, #2C5F7C 0%, #3A7CA5 100%);
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }

        .quiz-header h1 {
            color: white;
            margin-bottom: 0.5rem;
        }

        .instructions {
            background: #fff9f0;
            border-left: 4px solid var(--accent-color);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 5px;
        }

        .question-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .question-number {
            display: inline-block;
            background: var(--primary-color);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            text-align: center;
            line-height: 35px;
            font-weight: bold;
            margin-right: 1rem;
        }

        .question-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .options {
            margin-left: 3rem;
        }

        .option {
            margin-bottom: 0.75rem;
            padding: 0.75rem;
            border: 2px solid transparent;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option:hover {
            background: #f8f9fa;
            border-color: #dee2e6;
        }

        .option input {
            margin-right: 0.75rem;
            cursor: pointer;
        }

        .option label {
            cursor: pointer;
        }

        .feedback {
            margin-left: 3rem;
            padding: 1rem;
            border-radius: 5px;
            margin-top: 1rem;
            display: none;
        }

        .feedback.correct {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .feedback.incorrect {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .submit-btn {
            text-align: center;
            margin: 2rem 0;
        }

        .results-card {
            background: white;
            border: 3px solid var(--primary-color);
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
            display: none;
        }

        .score-display {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-color);
            text-align: center;
            margin: 1rem 0;
        }

        .pass {
            color: #28a745;
        }

        .fail {
            color: #dc3545;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th, td {
            border: 1px solid #dee2e6;
            padding: 0.5rem;
            text-align: center;
        }

        th {
            background-color: var(--primary-color);
            color: white;
        }

        .data-table {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 5px;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1 class="site-title">Safaa Dabagh</h1>
            <nav>
                <a href="../../../index.html">Home</a>
                <a href="../../../about.html">About</a>
                <a href="../../../research.html">Research</a>
                <a href="../../../math54.html">Math 54</a>
                <a href="../../../math4.html">Math 4/4C</a>
                <a href="../../../ai-education.html">AI Journey</a>
                <a href="../../../publications.html">Publications</a>
            </nav>
        </div>
    </header>

    <main class="container" style="max-width: 900px;">
        <div class="quiz-header">
            <h1>Module 11 Quiz: Simple Linear Regression</h1>
            <p>Test your understanding with 15 auto-graded questions</p>
        </div>

        <p style="margin-bottom: 2rem;">
            <a href="../../../index.html">Home</a> &gt;
            <a href="../index.html">Intro Stats</a> &gt;
            <a href="index.html">Module 11</a> &gt;
            Quiz
        </p>

        <div class="instructions">
            <h2>Quiz Instructions</h2>
            <ul>
                <li><strong>15 multiple choice questions</strong> covering all Module 11 content</li>
                <li><strong>Passing score: 70%</strong> (11 out of 15 correct)</li>
                <li><strong>Immediate feedback</strong> - see results as soon as you submit</li>
                <li><strong>Detailed explanations</strong> provided for each question</li>
                <li>You may use a calculator, but show your work on paper</li>
                <li>Take your time and read each question carefully</li>
            </ul>
        </div>

        <form id="quizForm">
            <!-- Question 1 -->
            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">1</span>
                    <h3>If r = -0.85, which statement is true?</h3>
                </div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q1a" name="q1" value="a">
                        <label for="q1a">There is a weak negative linear relationship</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q1b" name="q1" value="b">
                        <label for="q1b">There is a strong negative linear relationship</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q1c" name="q1" value="c">
                        <label for="q1c">There is a strong positive linear relationship</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q1d" name="q1" value="d">
                        <label for="q1d">x causes y to decrease</label>
                    </div>
                </div>
                <div class="feedback" id="feedback1"></div>
            </div>

            <!-- Question 2 -->
            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">2</span>
                    <h3>The regression equation is ŷ = 100 - 5x. What does the -5 represent?</h3>
                </div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q2a" name="q2" value="a">
                        <label for="q2a">The y-intercept</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q2b" name="q2" value="b">
                        <label for="q2b">The slope: y decreases by 5 for each 1-unit increase in x</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q2c" name="q2" value="c">
                        <label for="q2c">The correlation coefficient</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q2d" name="q2" value="d">
                        <label for="q2d">The predicted value when x = 0</label>
                    </div>
                </div>
                <div class="feedback" id="feedback2"></div>
            </div>

            <!-- Question 3 -->
            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">3</span>
                    <h3>If r² = 0.64, what does this mean?</h3>
                </div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q3a" name="q3" value="a">
                        <label for="q3a">The correlation coefficient r = 0.64</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q3b" name="q3" value="b">
                        <label for="q3b">64% of the variation in y is explained by x</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q3c" name="q3" value="c">
                        <label for="q3c">There is a 64% chance the variables are related</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q3d" name="q3" value="d">
                        <label for="q3d">The slope equals 0.64</label>
                    </div>
                </div>
                <div class="feedback" id="feedback3"></div>
            </div>

            <!-- Question 4 -->
            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">4</span>
                    <h3>Using ŷ = 50 + 3x, predict y when x = 10.</h3>
                </div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q4a" name="q4" value="a">
                        <label for="q4a">53</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q4b" name="q4" value="b">
                        <label for="q4b">30</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q4c" name="q4" value="c">
                        <label for="q4c">80</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q4d" name="q4" value="d">
                        <label for="q4d">500</label>
                    </div>
                </div>
                <div class="feedback" id="feedback4"></div>
            </div>

            <!-- Question 5 -->
            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">5</span>
                    <h3>A point has actual value y = 75 and predicted value ŷ = 70. What is the residual?</h3>
                </div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q5a" name="q5" value="a">
                        <label for="q5a">5</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q5b" name="q5" value="b">
                        <label for="q5b">-5</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q5c" name="q5" value="c">
                        <label for="q5c">145</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q5d" name="q5" value="d">
                        <label for="q5d">Cannot be determined</label>
                    </div>
                </div>
                <div class="feedback" id="feedback5"></div>
            </div>

            <!-- Question 6 -->
            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">6</span>
                    <h3>Which condition is violated if a residual plot shows a clear U-shaped curve?</h3>
                </div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q6a" name="q6" value="a">
                        <label for="q6a">Linearity</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q6b" name="q6" value="b">
                        <label for="q6b">Independence</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q6c" name="q6" value="c">
                        <label for="q6c">Normality</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q6d" name="q6" value="d">
                        <label for="q6d">Equal variance</label>
                    </div>
                </div>
                <div class="feedback" id="feedback6"></div>
            </div>

            <!-- Question 7 -->
            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">7</span>
                    <h3>When testing H₀: ρ = 0, what are we testing?</h3>
                </div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q7a" name="q7" value="a">
                        <label for="q7a">Whether the sample correlation equals zero</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q7b" name="q7" value="b">
                        <label for="q7b">Whether there is a significant linear relationship in the population</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q7c" name="q7" value="c">
                        <label for="q7c">Whether x and y are identical</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q7d" name="q7" value="d">
                        <label for="q7d">Whether the y-intercept is zero</label>
                    </div>
                </div>
                <div class="feedback" id="feedback7"></div>
            </div>

            <!-- Question 8 -->
            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">8</span>
                    <h3>Testing H₀: ρ = 0 and H₀: β₁ = 0 with the same data will:</h3>
                </div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q8a" name="q8" value="a">
                        <label for="q8a">Give different conclusions</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q8b" name="q8" value="b">
                        <label for="q8b">Give the same conclusion (they're equivalent tests)</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q8c" name="q8" value="c">
                        <label for="q8c">Cannot both be performed on the same data</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q8d" name="q8" value="d">
                        <label for="q8d">Use different sample sizes</label>
                    </div>
                </div>
                <div class="feedback" id="feedback8"></div>
            </div>

            <!-- Question 9 -->
            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">9</span>
                    <h3>Calculate the test statistic: n = 20, r = 0.50, testing H₀: ρ = 0</h3>
                </div>
                <p style="margin-left: 3rem; font-size: 0.9rem;">Use: t = r√[(n-2)/(1-r²)]</p>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q9a" name="q9" value="a">
                        <label for="q9a">t = 2.00</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q9b" name="q9" value="b">
                        <label for="q9b">t = 2.45</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q9c" name="q9" value="c">
                        <label for="q9c">t = 3.16</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q9d" name="q9" value="d">
                        <label for="q9d">t = 1.50</label>
                    </div>
                </div>
                <div class="feedback" id="feedback9"></div>
            </div>

            <!-- Question 10 -->
            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">10</span>
                    <h3>A 95% CI for slope is (2.5, 8.3). Can we reject H₀: β₁ = 0 at α = 0.05?</h3>
                </div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q10a" name="q10" value="a">
                        <label for="q10a">Yes, because the interval doesn't contain 0</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q10b" name="q10" value="b">
                        <label for="q10b">No, because the interval doesn't contain 0</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q10c" name="q10" value="c">
                        <label for="q10c">Cannot determine from a confidence interval</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q10d" name="q10" value="d">
                        <label for="q10d">Yes, because both bounds are positive</label>
                    </div>
                </div>
                <div class="feedback" id="feedback10"></div>
            </div>

            <!-- Question 11 -->
            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">11</span>
                    <h3>Which correlation represents the strongest relationship?</h3>
                </div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q11a" name="q11" value="a">
                        <label for="q11a">r = 0.60</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q11b" name="q11" value="b">
                        <label for="q11b">r = -0.85</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q11c" name="q11" value="c">
                        <label for="q11c">r = 0.20</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q11d" name="q11" value="d">
                        <label for="q11d">r = -0.50</label>
                    </div>
                </div>
                <div class="feedback" id="feedback11"></div>
            </div>

            <!-- Question 12 -->
            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">12</span>
                    <h3>What is the main difference between a confidence interval and a prediction interval?</h3>
                </div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q12a" name="q12" value="a">
                        <label for="q12a">They use different confidence levels</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q12b" name="q12" value="b">
                        <label for="q12b">CI estimates a mean; PI predicts an individual value</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q12c" name="q12" value="c">
                        <label for="q12c">They are the same thing</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q12d" name="q12" value="d">
                        <label for="q12d">CI is wider than PI</label>
                    </div>
                </div>
                <div class="feedback" id="feedback12"></div>
            </div>

            <!-- Question 13 -->
            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">13</span>
                    <h3>Why is a prediction interval wider than a confidence interval for the same x value?</h3>
                </div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q13a" name="q13" value="a">
                        <label for="q13a">It uses a larger critical value</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q13b" name="q13" value="b">
                        <label for="q13b">It accounts for individual variation (the "1 +" in the SE formula)</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q13c" name="q13" value="c">
                        <label for="q13c">It has more degrees of freedom</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q13d" name="q13" value="d">
                        <label for="q13d">It's based on a different regression equation</label>
                    </div>
                </div>
                <div class="feedback" id="feedback13"></div>
            </div>

            <!-- Question 14 -->
            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">14</span>
                    <h3>Ice cream sales and drowning deaths are positively correlated. This means:</h3>
                </div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q14a" name="q14" value="a">
                        <label for="q14a">Ice cream causes drowning</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q14b" name="q14" value="b">
                        <label for="q14b">Drowning causes people to buy ice cream</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q14c" name="q14" value="c">
                        <label for="q14c">Both increase in summer (confounding variable)</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q14d" name="q14" value="d">
                        <label for="q14d">There is no relationship</label>
                    </div>
                </div>
                <div class="feedback" id="feedback14"></div>
            </div>

            <!-- Question 15 -->
            <div class="question-card">
                <div class="question-header">
                    <span class="question-number">15</span>
                    <h3>The data ranges from x = 5 to x = 25. Predicting at x = 30 is an example of:</h3>
                </div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q15a" name="q15" value="a">
                        <label for="q15a">Interpolation (safe)</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q15b" name="q15" value="b">
                        <label for="q15b">Extrapolation (risky)</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q15c" name="q15" value="c">
                        <label for="q15c">A valid prediction</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q15d" name="q15" value="d">
                        <label for="q15d">Testing the slope</label>
                    </div>
                </div>
                <div class="feedback" id="feedback15"></div>
            </div>

            <div class="submit-btn">
                <button type="button" class="btn btn-primary" onclick="gradeQuiz()">Submit Quiz</button>
            </div>
        </form>

        <!-- Results Card -->
        <div class="results-card" id="resultsCard">
            <h2 style="text-align: center; color: var(--primary-color);">Quiz Results</h2>
            <div class="score-display" id="scoreDisplay"></div>
            <div id="resultMessage" style="text-align: center; font-size: 1.2rem; margin: 1rem 0;"></div>

            <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin: 2rem 0;">
                <h3>Performance by Topic:</h3>
                <div id="topicBreakdown"></div>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <a href="post-assessment.html" class="btn btn-primary" style="margin-right: 1rem;">Continue to Post-Assessment →</a>
                <button onclick="location.reload()" class="btn btn-outline">Retake Quiz</button>
            </div>
        </div>

        <div style="text-align: center; margin: 2rem 0;">
            <a href="index.html" class="btn btn-outline">← Back to Module 11 Overview</a>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Safaa Dabagh. All rights reserved.</p>
            <p>
                <a href="../../../index.html">Home</a> |
                <a href="../../../about.html">About</a> |
                <a href="../../../research.html">Research</a> |
                <a href="../../../publications.html">Publications</a> |
                <a href="mailto:dabagh_safaa@smc.edu">Contact</a>
            </p>
        </div>
    </footer>

    <script>
        // Correct answers
        const correctAnswers = {
            q1: 'b',
            q2: 'b',
            q3: 'b',
            q4: 'c',
            q5: 'a',
            q6: 'a',
            q7: 'b',
            q8: 'b',
            q9: 'b',
            q10: 'a',
            q11: 'b',
            q12: 'b',
            q13: 'b',
            q14: 'c',
            q15: 'b'
        };

        // Explanations
        const explanations = {
            q1: {
                correct: 'Correct! r = -0.85 indicates a strong (|r| close to 1) negative (negative sign) linear relationship.',
                incorrect: 'Incorrect. |r| = 0.85 is close to 1, indicating a STRONG relationship. The negative sign means negative association, not weak. Correlation never implies causation.'
            },
            q2: {
                correct: 'Correct! The slope (-5) tells us that y decreases by 5 units for each 1-unit increase in x.',
                incorrect: 'Incorrect. In ŷ = b₀ + b₁x, the slope is b₁ (the coefficient of x). Here, -5 is the slope. The y-intercept is 100.'
            },
            q3: {
                correct: 'Correct! r² represents the proportion (percentage) of variation in y explained by the linear relationship with x.',
                incorrect: 'Incorrect. r² = 0.64 means 64% of the variation in y is explained by x. Note: r could be ±0.8 (since 0.8² = 0.64).'
            },
            q4: {
                correct: 'Correct! ŷ = 50 + 3(10) = 50 + 30 = 80.',
                incorrect: 'Incorrect. Plug in x = 10: ŷ = 50 + 3(10) = 50 + 30 = 80.'
            },
            q5: {
                correct: 'Correct! Residual = y - ŷ = 75 - 70 = 5. The actual value is 5 units above the predicted value.',
                incorrect: 'Incorrect. Residual = observed - predicted = y - ŷ = 75 - 70 = +5. Positive residual means the actual is above predicted.'
            },
            q6: {
                correct: 'Correct! A U-shaped curve indicates the relationship is not linear - it\'s curved. This violates the Linearity condition.',
                incorrect: 'Incorrect. A U-shaped curve means the relationship is non-linear (curved), violating the Linearity condition of LINE.'
            },
            q7: {
                correct: 'Correct! Testing H₀: ρ = 0 tests whether there is a significant linear relationship in the population.',
                incorrect: 'Incorrect. H₀: ρ = 0 tests whether the POPULATION correlation equals zero, i.e., whether there\'s a linear relationship in the population.'
            },
            q8: {
                correct: 'Correct! These two tests are mathematically equivalent - they yield the same t-value, p-value, and conclusion.',
                incorrect: 'Incorrect. Testing ρ = 0 and β₁ = 0 are EQUIVALENT tests. Both ask: "Is there a linear relationship?" They give the same conclusion.'
            },
            q9: {
                correct: 'Correct! t = 0.50√[(20-2)/(1-0.50²)] = 0.50√[18/0.75] = 0.50√24 = 0.50(4.899) = 2.45',
                incorrect: 'Incorrect. t = r√[(n-2)/(1-r²)] = 0.50√[(18)/(0.75)] = 0.50√24 = 0.50(4.899) ≈ 2.45'
            },
            q10: {
                correct: 'Correct! Since the interval (2.5, 8.3) does not contain 0, we reject H₀: β₁ = 0. There is a significant relationship.',
                incorrect: 'Incorrect. If a confidence interval for β₁ does NOT contain 0, we can reject H₀: β₁ = 0 at that α level. Here we would reject.'
            },
            q11: {
                correct: 'Correct! Strength is measured by |r|. |-0.85| = 0.85 is the largest, so r = -0.85 is strongest.',
                incorrect: 'Incorrect. Strength is measured by absolute value |r|. Compare: |0.60| < |-0.85| > |0.20|. The answer is r = -0.85.'
            },
            q12: {
                correct: 'Correct! A confidence interval estimates the mean response; a prediction interval predicts an individual value.',
                incorrect: 'Incorrect. CI estimates the AVERAGE y at x*; PI predicts a SINGLE y value at x*. PI is wider than CI.'
            },
            q13: {
                correct: 'Correct! The prediction interval SE includes "1 +" to account for individual variation around the mean.',
                incorrect: 'Incorrect. PI is wider because its SE = sₑ√[1 + 1/n + ...]. The "1 +" accounts for individual variation.'
            },
            q14: {
                correct: 'Correct! Both increase in summer due to hot weather - a confounding variable. Correlation ≠ causation!',
                incorrect: 'Incorrect. This is a classic example of CONFOUNDING. Hot weather causes both more swimming (drowning risk) and more ice cream sales.'
            },
            q15: {
                correct: 'Correct! Predicting outside the data range (30 > 25) is extrapolation, which is risky.',
                incorrect: 'Incorrect. Data ranges from 5-25. Predicting at 30 is OUTSIDE this range = EXTRAPOLATION (risky).'
            }
        };

        // Topic assignments for performance breakdown
        const topicMap = {
            q1: 'correlation',
            q2: 'regression',
            q3: 'regression',
            q4: 'regression',
            q5: 'regression',
            q6: 'conditions',
            q7: 'testing',
            q8: 'testing',
            q9: 'testing',
            q10: 'intervals',
            q11: 'correlation',
            q12: 'intervals',
            q13: 'intervals',
            q14: 'correlation',
            q15: 'regression'
        };

        function gradeQuiz() {
            // Collect answers
            const userAnswers = {};
            let allAnswered = true;

            for (let i = 1; i <= 15; i++) {
                const answer = document.querySelector(`input[name="q${i}"]:checked`);
                if (!answer) {
                    allAnswered = false;
                    break;
                }
                userAnswers[`q${i}`] = answer.value;
            }

            if (!allAnswered) {
                alert('Please answer all questions before submitting.');
                return;
            }

            // Grade each question
            let correctCount = 0;
            const topicScores = {
                correlation: { correct: 0, total: 0 },
                regression: { correct: 0, total: 0 },
                testing: { correct: 0, total: 0 },
                conditions: { correct: 0, total: 0 },
                intervals: { correct: 0, total: 0 }
            };

            for (let i = 1; i <= 15; i++) {
                const qKey = `q${i}`;
                const isCorrect = userAnswers[qKey] === correctAnswers[qKey];
                const feedback = document.getElementById(`feedback${i}`);

                if (isCorrect) {
                    correctCount++;
                    feedback.className = 'feedback correct';
                    feedback.innerHTML = '<strong>✓ Correct!</strong> ' + explanations[qKey].correct;
                    topicScores[topicMap[qKey]].correct++;
                } else {
                    feedback.className = 'feedback incorrect';
                    feedback.innerHTML = '<strong>✗ Incorrect.</strong> ' + explanations[qKey].incorrect;
                }
                feedback.style.display = 'block';

                topicScores[topicMap[qKey]].total++;
            }

            // Calculate percentage
            const percentage = Math.round((correctCount / 15) * 100);
            const passed = percentage >= 70;

            // Display results
            const scoreDisplay = document.getElementById('scoreDisplay');
            scoreDisplay.textContent = `${correctCount}/15 (${percentage}%)`;
            scoreDisplay.className = `score-display ${passed ? 'pass' : 'fail'}`;

            const resultMessage = document.getElementById('resultMessage');
            if (passed) {
                resultMessage.innerHTML = '<strong style="color: #28a745;">✓ Congratulations! You passed!</strong><br>You have successfully demonstrated understanding of simple linear regression.';
            } else {
                resultMessage.innerHTML = '<strong style="color: #dc3545;">You need 70% to pass.</strong><br>Review the explanations below, study the lessons, and try again.';
            }

            // Topic breakdown
            const topicBreakdown = document.getElementById('topicBreakdown');
            topicBreakdown.innerHTML = `
                <p><strong>Correlation & Scatter Plots:</strong> ${topicScores.correlation.correct}/${topicScores.correlation.total} correct</p>
                <p><strong>Regression Equation:</strong> ${topicScores.regression.correct}/${topicScores.regression.total} correct</p>
                <p><strong>Hypothesis Testing:</strong> ${topicScores.testing.correct}/${topicScores.testing.total} correct</p>
                <p><strong>LINE Conditions:</strong> ${topicScores.conditions.correct}/${topicScores.conditions.total} correct</p>
                <p><strong>Confidence & Prediction Intervals:</strong> ${topicScores.intervals.correct}/${topicScores.intervals.total} correct</p>
            `;

            // Show results card
            document.getElementById('resultsCard').style.display = 'block';

            // Scroll to results
            document.getElementById('resultsCard').scrollIntoView({ behavior: 'smooth' });

            // Log results (placeholder for future data collection)
            console.log('Quiz Results:', {
                score: `${correctCount}/15`,
                percentage: percentage,
                passed: passed,
                timestamp: new Date().toISOString(),
                answers: userAnswers
            });

            // Store in localStorage
            localStorage.setItem('module11_quiz', JSON.stringify({
                score: correctCount,
                percentage: percentage,
                passed: passed,
                timestamp: new Date().toISOString()
            }));
        }
    </script>
</body>
</html>
